(function(){"use strict";var e={3964:function(e,t,a){var n=a(3751),s=a(641);const i={id:"app"},o={class:"main-content"},r={class:"data-area"},l={class:"advertisement-area"};function c(e,t,a,n,c,d){const u=(0,s.g2)("HeaderMenu"),g=(0,s.g2)("ContentArea"),h=(0,s.g2)("AdvertisementBlock"),v=(0,s.g2)("FooterInfo");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(u,{cities:c.cities,towns:c.towns,selectedCity:c.selectedCity,selectedTown:c.selectedTown,onCityChange:d.handleCityChange,onTownChange:d.handleTownChange},null,8,["cities","towns","selectedCity","selectedTown","onCityChange","onTownChange"]),(0,s.Lk)("div",o,[(0,s.Lk)("div",r,[(0,s.bF)(g,{cities:c.cities,towns:c.towns,selectedCity:c.selectedCity,selectedTown:c.selectedTown,currentPage:c.currentPage,totalPages:d.totalPages,pagedData:d.pagedData,onGotoPage:d.gotoPage,loading:c.loading},null,8,["cities","towns","selectedCity","selectedTown","currentPage","totalPages","pagedData","onGotoPage","loading"])]),(0,s.Lk)("div",l,[(0,s.bF)(h,{advertisements:c.advertisements},null,8,["advertisements"])])]),(0,s.bF)(v)])}a(4114),a(3375),a(9225),a(3972),a(9209),a(5714),a(7561),a(6197);var d=a(5894);const u={class:"header-menu-container"},g=(0,s.Lk)("header",{class:"header"},[(0,s.Lk)("h1",null,"農村地方美食小吃特色料理")],-1),h=[g];function v(e,t,a,n,i,o){return(0,s.uX)(),(0,s.CE)("div",u,h)}var p={name:"HeaderMenu"},f=a(6262);const C=(0,f.A)(p,[["render",v]]);var y=C,w=a(33);const m=(0,s.Lk)("div",{class:"left-content"},null,-1),P={class:"content-ad-wrapper"},k={class:"restaurant-container"},T={class:"dropdowns"},b=(0,s.Lk)("option",{value:"",disabled:"",selected:""},"請選擇縣市",-1),D=["value"],L=(0,s.Lk)("option",{value:"",disabled:"",selected:""},"請選擇鄉鎮市",-1),F=["value"],A={class:"content-wrapper"},_={key:0,class:"loading-indicator"},E={key:1,class:"error-message"},O={class:"location-info"},X={class:"city-label highlight-city"},I={class:"town-label"},U={class:"restaurant-content"},x={class:"restaurant-image"},M={class:"image-container"},R=["src"],j={class:"restaurant-info"},S={class:"restaurant-title"},B=["onClick"],H=["innerHTML"],K={key:2,class:"pagination"},N={class:"page-info"},G={class:"page-buttons"},Q=["onClick","disabled"];function V(e,t,a,i,o,r){const l=(0,s.g2)("AdvertisementBlock");return(0,s.uX)(),(0,s.CE)("div",null,[m,(0,s.Lk)("div",P,[(0,s.Lk)("div",k,[(0,s.Lk)("div",T,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedCity=e),onChange:t[1]||(t[1]=(...e)=>r.handleCityChange&&r.handleCityChange(...e)),class:"dropdown"},[b,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.cities,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,w.v_)(e),9,D)))),128))],544),[[n.u1,o.selectedCity]]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedTown=e),onChange:t[3]||(t[3]=(...e)=>r.handleTownChange&&r.handleTownChange(...e)),class:"dropdown"},[L,o.selectedCity?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(a.towns[o.selectedCity],(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,w.v_)(e),9,F)))),128)):(0,s.Q3)("",!0)],544),[[n.u1,o.selectedTown]])]),(0,s.Lk)("div",A,[o.loading?((0,s.uX)(),(0,s.CE)("div",_,"加載中...")):(0,s.Q3)("",!0),o.error?((0,s.uX)(),(0,s.CE)("div",E,(0,w.v_)(o.error),1)):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.pagedData,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.ID,class:"restaurant-item"},[(0,s.Lk)("div",O,[(0,s.Lk)("div",X,(0,w.v_)(e.City),1),(0,s.Lk)("div",I,(0,w.v_)(e.Town),1)]),(0,s.Lk)("div",U,[(0,s.Lk)("div",x,[(0,s.Lk)("div",M,[(0,s.Lk)("img",{src:e.PicURL,alt:"Restaurant Image"},null,8,R)])]),(0,s.Lk)("div",j,[(0,s.Lk)("div",S,[(0,s.Lk)("div",{class:"restaurant-name",style:(0,w.Tr)({color:e.URL?"rgb(12, 164, 211)":"black"}),onClick:t=>r.openUrl(e.URL)},(0,w.v_)(e.Name),13,B),(0,s.Lk)("div",{class:"restaurant-description",innerHTML:e.FoodFeature.replace(/<br><br>/g,"")},null,8,H)])])])])))),128)),r.totalPages>1||0===r.filteredData.length?((0,s.uX)(),(0,s.CE)("div",K,[(0,s.Lk)("div",N,"美食頁次 "+(0,w.v_)(o.currentPage)+" / "+(0,w.v_)(r.totalPages),1),(0,s.Lk)("div",G,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.totalPages,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,onClick:t=>r.gotoPage(e),disabled:o.currentPage===e,class:(0,w.C4)(["page-button",{active:o.currentPage===e}])},(0,w.v_)(e),11,Q)))),128))])])):(0,s.Q3)("",!0)])])]),(0,s.bF)(l,{advertisements:e.advertisements,isAdFixed:e.isAdFixed},null,8,["advertisements","isAdFixed"])])}var q={name:"ContentArea",props:{cities:Array,towns:Object},data(){return{allData:[],currentPage:1,itemsPerPage:10,loading:!1,error:null,selectedCity:"",selectedTown:""}},computed:{totalPages(){return Math.ceil(this.filteredData.length/this.itemsPerPage)},filteredData(){const e=this.selectedTown?this.selectedCity:this.selectedCity||"",t=this.selectedTown||"";return this.allData.filter((a=>(!e||a.City===e)&&(!t||a.Town===t)))},pagedData(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredData.slice(e,t)}},watch:{selectedCity(e,t){e!==t&&""!==e&&(this.currentPage=1,this.fetchData())},selectedTown(e,t){e!==t&&""!==e&&(this.currentPage=1,this.fetchData())}},created(){this.fetchData()},methods:{async fetchData(){try{this.loading=!0;const e=await d.A.get("https://data.moa.gov.tw/Service/OpenData/ODwsv/ODwsvTravelFood.aspx");this.allData=e.data.map((e=>({ID:e.ID,Name:e.Name,City:e.City,Town:e.Town,FoodFeature:e.FoodFeature,PicURL:e.PicURL,URL:e.URL})))}catch(e){console.error("获取数据时发生错误: ",e),this.error="获取数据时发生错误，请稍后重试。"}finally{this.loading=!1}},gotoPage(e){e>0&&e<=this.totalPages&&(this.currentPage=e)},handleCityChange(e){this.selectedCity=e.target.value,this.selectedTown=""},handleTownChange(e){this.selectedTown=e.target.value},openUrl(e){e&&window.open(e,"_blank")}}};const z=(0,f.A)(q,[["render",V]]);var J=z;const W={class:"advertisement-wrapper"},Y=["src","alt"];function Z(e,t,a,n,i,o){return(0,s.uX)(),(0,s.CE)("div",W,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.advertisements,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"advertisement"},[(0,s.Lk)("img",{src:e.src,alt:"Advertisement "+(t+1)},null,8,Y)])))),128))])}var $={name:"AdvertisementBlock",props:{advertisements:Array}};const ee=(0,f.A)($,[["render",Z],["__scopeId","data-v-5bd6e85a"]]);var te=ee;const ae={class:"footer"},ne=(0,s.Fv)('<div class="footer-content" data-v-01d6fd46><div class="footer-top" data-v-01d6fd46><p style="color:#CBCDCC;margin:0;" data-v-01d6fd46>CMoney 全曜財經資訊GGA撰寫</p></div><div class="footer-bottom" data-v-01d6fd46><p style="margin:0;" data-v-01d6fd46>資料來源：<a href="https://data.gov.tw/dataset/6037" target="_blank" style="color:#FFFCF3;text-decoration:none;" data-v-01d6fd46>政府資料開放平台</a></p></div></div>',1),se=[ne];function ie(e,t,a,n,i,o){return(0,s.uX)(),(0,s.CE)("div",ae,se)}var oe={name:"FooterInfo"};const re=(0,f.A)(oe,[["render",ie],["__scopeId","data-v-01d6fd46"]]);var le=re,ce={name:"App",components:{HeaderMenu:y,ContentArea:J,AdvertisementBlock:te,FooterInfo:le},data(){return{selectedCity:null,selectedTown:null,allData:[],cities:[],towns:{},currentPage:1,itemsPerPage:10,loading:!1,advertisements:[]}},computed:{totalPages(){return Math.ceil(this.filteredData.length/this.itemsPerPage)},filteredData(){return this.allData.filter((e=>(!this.selectedCity||e.City===this.selectedCity)&&(!this.selectedTown||e.Town===this.selectedTown)))},pagedData(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredData.slice(e,t)}},watch:{selectedCity(e,t){e!==t&&(this.currentPage=1,this.updateTotalPages())},selectedTown(e,t){e!==t&&(this.currentPage=1,this.updateTotalPages())}},created(){this.fetchData(),this.advertisements=[{src:a(4764)},{src:a(9847)},{src:a(9854)}]},methods:{updateTotalPages(){this.totalPages=Math.ceil(this.filteredData.length/this.itemsPerPage)},async fetchData(){try{this.loading=!0;const e=await d.A.get("https://data.moa.gov.tw/Service/OpenData/ODwsv/ODwsvTravelFood.aspx");this.allData=e.data.map((e=>({ID:e.ID,Name:e.Name,City:e.City,Town:e.Town,FoodFeature:e.FoodFeature,PicURL:e.PicURL,URL:e.URL}))),this.updateCitiesAndTowns(),this.totalPages=Math.ceil(this.filteredData.length/this.itemsPerPage)}catch(e){console.error("There was an error fetching the data: ",e)}finally{this.loading=!1}},updateCitiesAndTowns(){this.cities=[...new Set(this.allData.map((e=>e.City)))],this.towns=this.allData.reduce(((e,t)=>(e[t.City]||(e[t.City]=[]),e[t.City].includes(t.Town)||e[t.City].push(t.Town),e)),{})},handleCityChange(e){this.selectedCity=e,this.currentPage=1},handleTownChange(e){this.selectedTown=e,this.currentPage=1},gotoPage(e){this.currentPage=e}}};const de=(0,f.A)(ce,[["render",c],["__scopeId","data-v-0233dc68"]]);var ue=de;const ge=(0,n.Ef)(ue);ge.config.productionTip=!1,ge.mount("#app")},4764:function(e,t,a){e.exports=a.p+"img/adv1.55686113.png"},9847:function(e,t,a){e.exports=a.p+"img/adv2.e3dca8c2.png"},9854:function(e,t,a){e.exports=a.p+"img/adv3.baa631ac.png"}},t={};function a(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,n,s,i){if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],s=e[d][1],i=e[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(r=!1,i<o&&(o=i));if(r){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,s,i]}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/vue-app/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,i,o=n[0],r=n[1],l=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var d=l(a)}for(t&&t(n);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},n=self["webpackChunkyour_project_name"]=self["webpackChunkyour_project_name"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(3964)}));n=a.O(n)})();
//# sourceMappingURL=app.4b500bf4.js.map