(function(){"use strict";var e={2197:function(e,t,a){var n=a(3751),s=a(641);const o={id:"app"},i={class:"main-content"},r={class:"data-area"},d={class:"advertisement-area"};function l(e,t,a,n,l,c){const u=(0,s.g2)("HeaderMenu"),h=(0,s.g2)("ContentArea"),g=(0,s.g2)("AdvertisementBlock"),v=(0,s.g2)("FooterInfo");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(u),(0,s.Lk)("div",i,[(0,s.Lk)("div",r,[(0,s.bF)(h,{items:c.pagedData,dropdowns:l.dropdowns,currentPage:l.currentPage,totalPages:c.totalPages,loading:l.loading,onGotoPage:c.gotoPage},null,8,["items","dropdowns","currentPage","totalPages","loading","onGotoPage"])]),(0,s.Lk)("div",d,[(0,s.bF)(g,{advertisements:l.advertisements},null,8,["advertisements"])])]),(0,s.bF)(v)])}a(4114),a(3375),a(9225),a(3972),a(9209),a(5714),a(7561),a(6197);var c=a(5894);const u={class:"header-menu-container"},h=(0,s.Lk)("header",{class:"header"},[(0,s.Lk)("h1",null,"農村地方美食小吃特色料理")],-1),g=[h];function v(e,t,a,n,o,i){return(0,s.uX)(),(0,s.CE)("div",u,g)}var p={name:"HeaderMenu"},f=a(6262);const m=(0,f.A)(p,[["render",v]]);var C=m,y=a(33);const w={class:"content-area"},k={class:"controls"},P={class:"mode-switch"},T=["value"],b={class:"mode-content"},L={key:0,class:"list-mode-container"},F={key:1,class:"table-mode-container"};function A(e,t,a,o,i,r){const d=(0,s.g2)("ListMode"),l=(0,s.g2)("TableMode"),c=(0,s.g2)("AdvertisementBlock");return(0,s.uX)(),(0,s.CE)("div",w,[(0,s.Lk)("div",k,[(0,s.Lk)("div",P,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>i.currentMode="list")},"列表模式"),(0,s.Lk)("button",{onClick:t[1]||(t[1]=e=>i.currentMode="table")},"表格模式")]),a.dropdowns.length>0?(0,s.bo)(((0,s.uX)(),(0,s.CE)("select",{key:0,"onUpdate:modelValue":t[2]||(t[2]=e=>i.selectedItem=e),onChange:t[3]||(t[3]=(...e)=>r.handleDropdownChange&&r.handleDropdownChange(...e))},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.dropdowns,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.value},(0,y.v_)(e.label),9,T)))),128))],544)),[[n.u1,i.selectedItem]]):(0,s.Q3)("",!0)]),(0,s.Lk)("div",b,["list"===i.currentMode?((0,s.uX)(),(0,s.CE)("div",L,[(0,s.bF)(d,{items:a.items},null,8,["items"])])):"table"===i.currentMode?((0,s.uX)(),(0,s.CE)("div",F,[(0,s.bF)(l,{items:a.items},null,8,["items"])])):(0,s.Q3)("",!0)]),(0,s.bF)(c,{advertisements:a.advertisements,isAdFixed:a.isAdFixed},null,8,["advertisements","isAdFixed"])])}const D={class:"content-area"},E=(0,s.Lk)("div",{class:"left-content"},null,-1),_={class:"right-content"},O={class:"dropdowns"},M=(0,s.Lk)("option",{value:"",disabled:"",selected:""},"請選擇縣市",-1),I=["value"],X=(0,s.Lk)("option",{value:"",disabled:"",selected:""},"請選擇鄉鎮市",-1),x=["value"],U={class:"restaurant-container"},S={class:"content-wrapper"},B={key:0,class:"loading-indicator"},H={key:1,class:"error-message"},R={class:"location-info"},$={class:"city-label highlight-city"},j={class:"town-label"},N={class:"restaurant-content"},G={class:"restaurant-image"},K={class:"image-container"},Q=["src"],W={class:"restaurant-info"},V={class:"restaurant-title"},q=["onClick"],Y=["innerHTML"],z={class:"pagination"},J={class:"page-info"},Z={class:"page-buttons"},ee=["onClick","disabled"];function te(e,t,a,o,i,r){const d=(0,s.g2)("AdvertisementBlock");return(0,s.uX)(),(0,s.CE)("div",D,[E,(0,s.Lk)("div",_,[(0,s.Lk)("div",O,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.selectedCity=e),onChange:t[1]||(t[1]=(...e)=>r.handleCityChange&&r.handleCityChange(...e)),class:"dropdown"},[M,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.cities,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,y.v_)(e),9,I)))),128))],544),[[n.u1,i.selectedCity]]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.selectedTown=e),onChange:t[3]||(t[3]=(...e)=>r.handleTownChange&&r.handleTownChange(...e)),class:"dropdown"},[X,i.selectedCity?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(a.towns[i.selectedCity],(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,y.v_)(e),9,x)))),128)):(0,s.Q3)("",!0)],544),[[n.u1,i.selectedTown]]),(0,s.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>r.toggleMode&&r.toggleMode(...e)),class:"mode-switch-button"},(0,y.v_)("list"===i.mode?"切換至表格模式":"切換至列表模式"),1)]),(0,s.Lk)("div",U,[(0,s.Lk)("div",S,[i.loading?((0,s.uX)(),(0,s.CE)("div",B,"加載中...")):(0,s.Q3)("",!0),i.error?((0,s.uX)(),(0,s.CE)("div",H,(0,y.v_)(i.error),1)):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.pagedData,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.ID,class:"restaurant-item"},[(0,s.Lk)("div",R,[(0,s.Lk)("div",$,(0,y.v_)(e.City),1),(0,s.Lk)("div",j,(0,y.v_)(e.Town),1)]),(0,s.Lk)("div",N,[(0,s.Lk)("div",G,[(0,s.Lk)("div",K,[(0,s.Lk)("img",{src:e.PicURL,alt:"Restaurant Image"},null,8,Q)])]),(0,s.Lk)("div",W,[(0,s.Lk)("div",V,[(0,s.Lk)("div",{class:"restaurant-name",style:(0,y.Tr)({color:e.Url?"rgb(12, 164, 211)":"black"}),onClick:t=>r.openUrl(e.Url)},(0,y.v_)(e.Name),13,q),(0,s.Lk)("div",{class:"restaurant-description",innerHTML:e.FoodFeature.replace(/<br><br>/g,"")},null,8,Y)])])])])))),128)),(0,s.Lk)("div",z,[(0,s.Lk)("div",J,"美食頁次 "+(0,y.v_)(i.currentPage)+" / "+(0,y.v_)(r.totalPages),1),(0,s.Lk)("div",Z,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.totalPages,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,onClick:t=>r.gotoPage(e),disabled:i.currentPage===e,class:(0,y.C4)(["page-button",{active:i.currentPage===e}])},(0,y.v_)(e),11,ee)))),128))])])])])]),(0,s.bF)(d,{advertisements:e.advertisements,isAdFixed:e.isAdFixed},null,8,["advertisements","isAdFixed"])])}var ae={name:"ContentArea",props:{cities:Array,towns:Object},data(){return{allData:[],currentPage:1,itemsPerPage:10,loading:!1,error:null,selectedCity:"",selectedTown:"",mode:"list"}},computed:{totalPages(){return Math.ceil(this.filteredData.length/this.itemsPerPage)},filteredData(){const e=this.selectedTown?this.selectedCity:this.selectedCity||"",t=this.selectedTown||"";return this.allData.filter((a=>(!e||a.City===e)&&(!t||a.Town===t)))},pagedData(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredData.slice(e,t)}},watch:{selectedCity(e,t){e!==t&&""!==e&&(this.currentPage=1,this.fetchData())},selectedTown(e,t){e!==t&&""!==e&&(this.currentPage=1,this.fetchData())},mode(e,t){e!==t&&console.log("切換模式到:",e)}},created(){this.fetchData()},methods:{async fetchData(){try{this.loading=!0;const e=await c.A.get("https://data.moa.gov.tw/Service/OpenData/ODwsv/ODwsvTravelFood.aspx");this.allData=e.data.map((e=>({ID:e.ID,Name:e.Name,Address:e.Address,Tel:e.Tel,HostWords:e.HostWords,Price:e.Price,OpenHours:e.OpenHours,CreditCard:e.CreditCard,TravelCard:e.TravelCard,TrafficGuidelines:e.TrafficGuidelines,ParkingLot:e.ParkingLot,Url:e.Url,Email:e.Email,PetNotice:e.PetNotice,Reminder:e.Reminder,FoodMonths:e.FoodMonths,FoodCapacity:e.FoodCapacity,FoodFeature:e.FoodFeature,City:e.City,Town:e.Town,PicURL:e.PicURL,Latitude:e.Latitude,Longitude:e.Longitude,BlogUrl:e.BlogUrl})))}catch(e){console.error("获取数据时发生错误: ",e),this.error="获取数据时发生错误，请稍后重试。"}finally{this.loading=!1}},gotoPage(e){e>0&&e<=this.totalPages&&(this.currentPage=e)},handleCityChange(e){this.selectedCity=e.target.value,this.selectedTown="",this.currentPage=1,this.fetchData()},handleTownChange(e){this.selectedTown=e.target.value,this.currentPage=1,this.fetchData()},openUrl(e){e&&window.open(e,"_blank")},toggleMode(){this.mode="list"===this.mode?"table":"list"}}};const ne=(0,f.A)(ae,[["render",te]]);var se=ne;const oe=e=>((0,s.Qi)("data-v-7b2fe437"),e=e(),(0,s.jt)(),e),ie={class:"table-mode"},re=oe((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"測試 1"),(0,s.Lk)("th",null,"測試 2")])],-1)));function de(e,t,a,n,o,i){return(0,s.uX)(),(0,s.CE)("div",ie,[(0,s.Lk)("table",null,[re,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.rows,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:t},[(0,s.Lk)("td",null,(0,y.v_)(e.column1),1),(0,s.Lk)("td",null,(0,y.v_)(e.column2),1)])))),128))])])])}var le={name:"TableMode",props:{rows:{type:Array,required:!0}}};const ce=(0,f.A)(le,[["render",de],["__scopeId","data-v-7b2fe437"]]);var ue=ce;const he={class:"advertisement-wrapper",ref:"wrapper"},ge=["src","alt"];function ve(e,t,a,n,o,i){return(0,s.uX)(),(0,s.CE)("div",he,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.advertisements,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:(0,y.C4)([{"fixed-advertisement":i.shouldFixAd(t)},"advertisement"]),style:(0,y.Tr)(o.adStyles[t]),ref_for:!0,ref:"advertisements"},[(0,s.Lk)("img",{src:e.src,alt:"Advertisement "+(t+1)},null,8,ge)],6)))),128))],512)}var pe={name:"AdvertisementBlock",props:{advertisements:Array},data(){return{adTopOffsets:[],adContainerTop:0,adContainerHeight:0,lastScrollTop:0,adStyles:[]}},mounted(){this.$nextTick((()=>{this.adTopOffsets=this.getAdTopOffsets(),this.adContainerTop=this.$refs.wrapper.offsetTop,this.adContainerHeight=this.$refs.wrapper.offsetHeight})),window.addEventListener("scroll",this.handleScroll)},unmounted(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){const e=window.scrollY||window.pageYOffset;this.lastScrollTop=e,this.updateAdStyles()},getAdTopOffsets(){return this.$refs.advertisements?this.$refs.advertisements.map((e=>e.offsetTop)):[]},shouldFixAd(e){if(this.$refs.advertisements&&this.$refs.advertisements.length>1){const t=this.$refs.advertisements[1].getBoundingClientRect().bottom;if(2===e&&t<=0)return!0}return!1},updateAdStyles(){this.$refs.advertisements&&this.$refs.advertisements.length>1&&(this.adStyles=this.adTopOffsets.map(((e,t)=>({position:2===t&&this.$refs.advertisements[1].getBoundingClientRect().bottom<=0?"fixed":"static",top:2===t&&this.$refs.advertisements[1].getBoundingClientRect().bottom<=0?"0":"auto",width:"100%",zIndex:2===t&&this.$refs.advertisements[1].getBoundingClientRect().bottom<=0?1e3:"auto"}))))}}};const fe=(0,f.A)(pe,[["render",ve],["__scopeId","data-v-712db443"]]);var me=fe,Ce={name:"ContentArea",components:{ListMode:se,TableMode:ue,AdvertisementBlock:me},props:{items:{type:Array,required:!0},advertisements:{type:Array,default:()=>[]},isAdFixed:{type:Boolean,default:!1},dropdowns:{type:Array,default:()=>[]}},data(){return{currentMode:"list",selectedItem:null}},methods:{handleDropdownChange(){console.log("Selected item:",this.selectedItem)}}};const ye=(0,f.A)(Ce,[["render",A],["__scopeId","data-v-69444560"]]);var we=ye;const ke={class:"footer"},Pe=(0,s.Fv)('<div class="footer-content" data-v-01d6fd46><div class="footer-top" data-v-01d6fd46><p style="color:#CBCDCC;margin:0;" data-v-01d6fd46>CMoney 全曜財經資訊GGA撰寫</p></div><div class="footer-bottom" data-v-01d6fd46><p style="margin:0;" data-v-01d6fd46>資料來源：<a href="https://data.gov.tw/dataset/6037" target="_blank" style="color:#FFFCF3;text-decoration:none;" data-v-01d6fd46>政府資料開放平台</a></p></div></div>',1),Te=[Pe];function be(e,t,a,n,o,i){return(0,s.uX)(),(0,s.CE)("div",ke,Te)}var Le={name:"FooterInfo"};const Fe=(0,f.A)(Le,[["render",be],["__scopeId","data-v-01d6fd46"]]);var Ae=Fe,De={name:"App",components:{HeaderMenu:C,ContentArea:we,AdvertisementBlock:me,FooterInfo:Ae},data(){return{selectedCity:null,selectedTown:null,allData:[],cities:[],towns:{},currentPage:1,itemsPerPage:10,loading:!1,advertisements:[{src:a(4764)},{src:a(9847)},{src:a(9854)}],dropdowns:[]}},computed:{totalPages(){return Math.ceil(this.filteredData.length/this.itemsPerPage)},filteredData(){return this.allData.filter((e=>(!this.selectedCity||e.City===this.selectedCity)&&(!this.selectedTown||e.Town===this.selectedTown)))},pagedData(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredData.slice(e,t)}},watch:{selectedCity(e,t){e!==t&&(this.selectedTown=null,this.updateTotalPages())},selectedTown(e,t){e!==t&&this.updateTotalPages()}},created(){this.fetchData()},methods:{updateTotalPages(){this.totalPages=Math.ceil(this.filteredData.length/this.itemsPerPage)},async fetchData(){try{this.loading=!0;const e=await c.A.get("https://data.moa.gov.tw/Service/OpenData/ODwsv/ODwsvTravelFood.aspx");this.allData=e.data.map((e=>({ID:e.ID,Name:e.Name,Address:e.Address,Tel:e.Tel,HostWords:e.HostWords,Price:e.Price,OpenHours:e.OpenHours,CreditCard:e.CreditCard,TravelCard:e.TravelCard,TrafficGuidelines:e.TrafficGuidelines,ParkingLot:e.ParkingLot,Url:e.Url,Email:e.Email,PetNotice:e.PetNotice,Reminder:e.Reminder,FoodMonths:e.FoodMonths,FoodCapacity:e.FoodCapacity,FoodFeature:e.FoodFeature,City:e.City,Town:e.Town,PicURL:e.PicURL,Latitude:e.Latitude,Longitude:e.Longitude,BlogUrl:e.BlogUrl}))),this.updateCitiesAndTowns(),this.updateTotalPages()}catch(e){console.error("There was an error fetching the data: ",e)}finally{this.loading=!1}},updateCitiesAndTowns(){this.cities=[...new Set(this.allData.map((e=>e.City)))],this.towns=this.allData.reduce(((e,t)=>(e[t.City]||(e[t.City]=[]),e[t.City].includes(t.Town)||e[t.City].push(t.Town),e)),{})},handleCityChange(e){this.selectedCity=e,this.currentPage=1},handleTownChange(e){this.selectedTown=e,this.currentPage=1},gotoPage(e){this.currentPage=e}}};const Ee=(0,f.A)(De,[["render",l],["__scopeId","data-v-103d02b0"]]);var _e=Ee;const Oe=(0,n.Ef)(_e);Oe.config.productionTip=!1,Oe.mount("#app")},4764:function(e,t,a){e.exports=a.p+"img/adv1.55686113.png"},9847:function(e,t,a){e.exports=a.p+"img/adv2.e3dca8c2.png"},9854:function(e,t,a){e.exports=a.p+"img/adv3.baa631ac.png"}},t={};function a(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,n,s,o){if(!n){var i=1/0;for(c=0;c<e.length;c++){n=e[c][0],s=e[c][1],o=e[c][2];for(var r=!0,d=0;d<n.length;d++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[d])}))?n.splice(d--,1):(r=!1,o<i&&(i=o));if(r){e.splice(c--,1);var l=s();void 0!==l&&(t=l)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,s,o]}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,o,i=n[0],r=n[1],d=n[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(d)var c=d(a)}for(t&&t(n);l<i.length;l++)o=i[l],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},n=self["webpackChunkyour_project_name"]=self["webpackChunkyour_project_name"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(2197)}));n=a.O(n)})();
//# sourceMappingURL=app.201d5d91.js.map